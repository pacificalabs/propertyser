<div class="row">
  <div class="col-md-3">
    <%= image_tag(photo_edit_page_apartment_image_url(photo), alt: "") %>
  </div>
  <% pd = PhotoDescription.find_or_initialize_by(blob_id: photo.id, apartment_id: @apartment.id) %>
  <%= form_for pd, url: pd.new_record? ? apartment_photo_descriptions_path(@apartment) : apartment_photo_description_path(@apartment, pd), 
                method: pd.new_record? ? :post : :patch, 
                class: "form-group alert alert-info col-md-6" do |f| %>
    <%= f.hidden_field :blob_id, value: photo.id %>
    <%= f.hidden_field :apartment_id, value: @apartment.id %>
    <div class="form-row mb-md-2 ml-md-2">
      <%= f.text_field :description, class: "form-control col-md-9 ml-md-2 mt-md-2 reply-box", 
                       maxlength: 200, 
                       placeholder: pd.description.presence || "DESCRIBE THIS IMAGE" %>
      <%= f.submit pd.new_record? ? 'Create Description' : 'Update Description', 
                   class: "m-md-2 btn #{pd.new_record? ? 'btn-outline-primary' : 'btn-outline-info'}" %>
      <% if @apartment.photos.size <= 1 %>
        <div title="min 1 photo required" class="tt d-inline-block" tabindex="0" data-toggle="tooltip" data-placement="top">
          <%= f.submit "Minimum 1 Photo Required", name: "delete", disabled: true, 
                       class: "m-md-2 btn btn-outline-info" %>
        </div>
      <% else %>
        <%= f.submit "Delete", name: "delete", 
                     class: "m-md-2 btn btn-outline-info", 
                     data: { confirm: "Are you sure you want to delete this photo?" } %>
      <% end %>
      <%= f.submit pd.featured ? 'Feature Photo' : 'Set As Feature Photo', 
                   name: pd.featured ? nil : 'featured', 
                   class: "m-md-2 btn btn-outline-info" %>
    </div>
  <% end %>
</div>